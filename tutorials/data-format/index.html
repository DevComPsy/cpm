<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Data formats - CPM library</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Data formats";
        var mkdocs_page_input_path = "tutorials/data-format.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/markdown.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/makefile.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> CPM library
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../roadmap/">Roadmap</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting Started</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Data formats</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#convert-your-data-from-csv-type-representation-pandasdataframe-to-dictionaries">Convert your data from csv-type representation (pandas.DataFrame) to dictionaries</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parameters/">Specify your parameters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../defining-model/">Build your model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fitting/">Fitting your models to data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/example1/">Example 1: An associative learning model and blocking</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/example2/">Example 2: Reinforcement learning with a two-armed bandit.</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/models/">cpm.models</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/generators/">cpm.generators</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/optimisation/">cpm.optimisation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/evaluation/">cpm.evaluation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/utils/">cpm.utils</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">CPM library</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">User Guide</li>
      <li class="breadcrumb-item active">Data formats</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="data-formats">Data formats</h1>
<p>How should your data look like? <code>cpm</code> is optimised for a specific data format, which is a list of dictionaries. Each dictionary represents a single participant. The key-value pairs in the dictionary are the names of the variables your model and the optimisation routines will need to simulate data and find the best-fitting parameters.</p>
<p>Imagine you have four stimuli in a given experiment, where on every trial they appear in a combination of two. Data then should be in the following format:</p>
<pre><code class="language-python">participant = {
    &quot;trials&quot;: np.array(
        [[2, 3],
         [1, 4],
         [3, 2],
         [4, 1],
         [2, 3],
         [2, 3],
         [1, 4],
         [3, 2],
         [4, 1],
         [2, 3]]
    ),
    &quot;feedback&quot;: np.array([[1], [0], [1], [0], [1], [1], [0], [1], [0], [1]]),
    &quot;observed&quot;: np.array([[1], [0], [1], [0], [1], [1], [0], [1], [0], [1]])
}
</code></pre>
<p>In this example, the <code>trials</code> key contains a list of all trials in the experiment. Each trial is a list of two values, representing stimuli that appeared on that trial. The <code>feedback</code> key contains a list of feedback values, where <code>1</code> means the participant responded correctly and <code>0</code> means the participant responded incorrectly. The <code>observed</code> key contains a list of observed values, which are the same as the feedback values in this case. The only mandatory field that we need you to specify is the <code>observed</code> key, which must be your dependent variables.</p>
<p><strong>Note</strong> that the first dimension of the keys in the dictionary indexes the trials! This is important because <code>cpm</code> will only loop through the first dimension!</p>
<p>You can also include additional variables in the data dictionary, such as participant id, reaction times. There is also no limits to what data you might include in the dictionary, as long as you have the <code>observed</code> key and everything else represents trial-by-trial information. What you include will largely depend on the model you are using.</p>
<p>Models in <code>cpm</code> will loop through each element in the keys and use the information to compute whatever is specified in the model. Note that </p>
<h2 id="convert-your-data-from-csv-type-representation-pandasdataframe-to-dictionaries">Convert your data from csv-type representation (pandas.DataFrame) to dictionaries</h2>
<p>Most of us import data as a <code>pandas.DataFrame</code> from a csv. This usually looks something like this.</p>
<pre><code class="language-python">      stimulus_left  stimulus_right  reward_left  reward_right  ppt
0                 4               3          0.0           1.0    1
1                 1               4          0.0           1.0    1
2                 4               2          0.0           0.0    1
3                 1               2          1.0           1.0    1
4                 4               3          0.0           0.0    1
...             ...             ...          ...           ...  ...
5995              1               2          1.0           0.0  100
5996              3               1          0.0           1.0  100
5997              4               2          1.0           0.0  100
5998              2               4          0.0           0.0  100
5999              1               3          1.0           1.0  100
</code></pre>
<p><code>cpm</code> provides utilities to convert this type of representation to the right format.</p>
<pre><code class="language-python">import pandas as pd
from cpm.utils import pandas_to_dict

dta = pd.read_csv(&quot;my_data.csv&quot;)
experiment = pandas_to_dict(dta, participant=&quot;ppt&quot;, stimuli='stim', feedback='reward', observed='response')
</code></pre>
<pre><code class="language-python">[
    {
        &quot;trials&quot;:
            array([[4, 3],
       [1, 4],
       [4, 2],
       [1, 2],
       [4, 3],
       [3, 4],
       [2, 3],
       [3, 4],
        ...
        ...
       [0., 1.],
       [0., 1.],
       [0., 1.],
       [1., 1.],
       [1., 0.],
       [1., 1.],
       [1., 1.],
       [0., 0.]]),
        &quot;ppt&quot;   : 1,
    },
]
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../getting-started/" class="btn btn-neutral float-left" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../parameters/" class="btn btn-neutral float-right" title="Specify your parameters">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../getting-started/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../parameters/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
